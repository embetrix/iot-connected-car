<html>
  <head>
    <script type="text/javascript" src="https://pubnub.github.io/eon/v/eon/1.1.0/eon.js"></script>
    <link type="text/css" rel="stylesheet" href="https://pubnub.github.io/eon/v/eon/1.1.0/eon.css"/>
  </head>
  <body>
    <div id="speed" style="float:left; width:20%;"></div>
    <script>
      var pubnub = new PubNub({
          subscribeKey: 'sub-c-67699446-666e-11e7-8948-02ee2ddab7fe'
      });
      eon.chart({
        pubnub: pubnub,
        channels: ['iot-car-channel'],
        history: true,
        generate: {
          bindto: '#speed',
            data: {
              type: 'gauge',
            },
          gauge: {
            label:{
               format: function(value, ratio){
                   return value
                 },
             },
            width : 65,
            min: 0,
            max: 255,
            units: 'km/h'
          },
         color: {
         pattern: ['#60B044', '#F6C600','#FF0000'],
         threshold: {
            values: [120, 160, 200]
            }
          }
      },
        transform: function(message) {

            var message = eon.c.flatten(message);
            return { eon: {
                    'speed': (message.speed)
                }
           }
        }
      });
    </script>

    <div id="speed-spline" style="float:left; width:70%;"></div>
    <script>
      var pubnub = new PubNub({
          subscribeKey: 'sub-c-67699446-666e-11e7-8948-02ee2ddab7fe'
      });
      eon.chart({
        pubnub: pubnub,
        channels: ['iot-car-channel'],
        history: true,
        generate: {
          bindto: '#speed-spline',
            data: {
              type: 'spline',
            },
      },
        transform: function(message) {

            var message = eon.c.flatten(message);
            return { eon: {
                    'speed': (message.speed)
                }
           }
        }
      });
    </script>

    <div id="rpm" style="float:left; width:20%;"></div>
    <script>
      var pubnub = new PubNub({
          subscribeKey: 'sub-c-67699446-666e-11e7-8948-02ee2ddab7fe'
      });
      eon.chart({
        pubnub: pubnub,
        channels: ['iot-car-channel'],
        history: true,
        generate: {
          bindto: '#rpm',
            data: {
              type: 'gauge',
            },
          gauge: {
            label:{
               format: function(value, ratio){
                   return value.toFixed(2); //returning here the value with 2 digit after comma
                 },
             },
            width : 65,
            min: 0,
            max: 8,
            units: 'rpm x1000'
          },
         color: {
         pattern: ['#60B044', '#F6C600','#FF0000'],
         threshold: {
            values: [3, 4, 6]
            }
          }
      },
        transform: function(message) {
            var message = eon.c.flatten(message);
            return { eon: {
                    'rpm': (message.rpm)/1000
                }
           }
        }
      });
    </script>
    <div id="rpm-spline" style="float:left; width:70%;"></div>
    <script>
      var pubnub = new PubNub({
          subscribeKey: 'sub-c-67699446-666e-11e7-8948-02ee2ddab7fe'
      });
      eon.chart({
        pubnub: pubnub,
        channels: ['iot-car-channel'],
        history: true,
        generate: {
          bindto: '#rpm-spline',
            data: {
              type: 'spline',
            },
      },
        transform: function(message) {
            var message = eon.c.flatten(message);
            return { eon: {
                    'rpm': (message.rpm)/1000
                }
           }
        }
      });
    </script>
   <div id="load" style="float:left; width:20%;"></div>
    <script>
      var pubnub = new PubNub({
          subscribeKey: 'sub-c-67699446-666e-11e7-8948-02ee2ddab7fe'
      });
      eon.chart({
        pubnub: pubnub,
        channels: ['iot-car-channel'],
        history: true,
        generate: {
          bindto: '#load',
            data: {
              type: 'gauge',
            },
         color: {
         pattern: ['#60B044', '#F6C600','#FF0000'],
         threshold: {
            values: [30, 70, 80]
            }
          }
      },
        transform: function(message) {
            var message = eon.c.flatten(message);
            return { eon: {
                    'load': (message.load)
                }
           }
        }
      });
    </script>
    <div id="load-spline" style="float:left; width:70%;"></div>
    <script>
      var pubnub = new PubNub({
          subscribeKey: 'sub-c-67699446-666e-11e7-8948-02ee2ddab7fe'
      });
      eon.chart({
        pubnub: pubnub,
        channels: ['iot-car-channel'],
        history: true,
        generate: {
          bindto: '#load-spline',
            data: {
              type: 'spline',
            },
      },
        transform: function(message) {
            var message = eon.c.flatten(message);
            return { eon: {
                    'load': (message.load)
                }
           }
        }
      });
    </script>
  </body>
</html>

